import React, {useEffect, useState} from "react";
import LoginComponent from "../LoginComponent";
import CardComponent from "./CardComponent";
import NavigationSidebar from "../NavigationSidebar";
import CommentList from "../ListOfCommentsComponent";


const Details = () => {
    let urlC = window.location.href.substr(window.location.href.lastIndexOf('/') + 1);

    const [card, setCard] = useState({
        "object": "card",
        "id": "5a5841fa-4f30-495a-b840-3ef5a2af8fad",
        "oracle_id": "ba995901-bb32-45ed-8af8-f98784b5a9b0",
        "multiverse_ids": [
            88817
        ],
        "mtgo_id": 22224,
        "mtgo_foil_id": 22225,
        "tcgplayer_id": 12503,
        "cardmarket_id": 12731,
        "name": "One with Nothing",
        "lang": "en",
        "released_at": "2005-06-03",
        "uri": "https://api.scryfall.com/cards/5a5841fa-4f30-495a-b840-3ef5a2af8fad",
        "scryfall_uri": "https://scryfall.com/card/sok/84/one-with-nothing?utm_source=api",
        "layout": "normal",
        "highres_image": true,
        "image_status": "highres_scan",
        "image_uris": {
            "small": "https://c1.scryfall.com/file/scryfall-cards/small/front/5/a/5a5841fa-4f30-495a-b840-3ef5a2af8fad.jpg?1562494149",
            "normal": "https://c1.scryfall.com/file/scryfall-cards/normal/front/5/a/5a5841fa-4f30-495a-b840-3ef5a2af8fad.jpg?1562494149",
            "large": "https://c1.scryfall.com/file/scryfall-cards/large/front/5/a/5a5841fa-4f30-495a-b840-3ef5a2af8fad.jpg?1562494149",
            "png": "https://c1.scryfall.com/file/scryfall-cards/png/front/5/a/5a5841fa-4f30-495a-b840-3ef5a2af8fad.png?1562494149",
            "art_crop": "https://c1.scryfall.com/file/scryfall-cards/art_crop/front/5/a/5a5841fa-4f30-495a-b840-3ef5a2af8fad.jpg?1562494149",
            "border_crop": "https://c1.scryfall.com/file/scryfall-cards/border_crop/front/5/a/5a5841fa-4f30-495a-b840-3ef5a2af8fad.jpg?1562494149"
        },
        "mana_cost": "{B}",
        "cmc": 1.0,
        "type_line": "Instant",
        "oracle_text": "Discard your hand.",
        "colors": [
            "B"
        ],
        "color_identity": [
            "B"
        ],
        "keywords": [

        ],
        "legalities": {
            "standard": "not_legal",
            "future": "not_legal",
            "historic": "not_legal",
            "gladiator": "not_legal",
            "pioneer": "not_legal",
            "modern": "legal",
            "legacy": "legal",
            "pauper": "not_legal",
            "vintage": "legal",
            "penny": "legal",
            "commander": "legal",
            "brawl": "not_legal",
            "historicbrawl": "not_legal",
            "paupercommander": "not_legal",
            "duel": "legal",
            "oldschool": "not_legal",
            "premodern": "not_legal"
        },
        "games": [
            "paper",
            "mtgo"
        ],
        "reserved": false,
        "foil": true,
        "nonfoil": true,
        "finishes": [
            "nonfoil",
            "foil"
        ],
        "oversized": false,
        "promo": false,
        "reprint": false,
        "variation": false,
        "set_id": "4db16ad3-2b95-442f-bb6b-e9aa7fe7f769",
        "set": "sok",
        "set_name": "Saviors of Kamigawa",
        "set_type": "expansion",
        "set_uri": "https://api.scryfall.com/sets/4db16ad3-2b95-442f-bb6b-e9aa7fe7f769",
        "set_search_uri": "https://api.scryfall.com/cards/search?order=set&q=e%3Asok&unique=prints",
        "scryfall_set_uri": "https://scryfall.com/sets/sok?utm_source=api",
        "rulings_uri": "https://api.scryfall.com/cards/5a5841fa-4f30-495a-b840-3ef5a2af8fad/rulings",
        "prints_search_uri": "https://api.scryfall.com/cards/search?order=released&q=oracleid%3Aba995901-bb32-45ed-8af8-f98784b5a9b0&unique=prints",
        "collector_number": "84",
        "digital": false,
        "rarity": "rare",
        "flavor_text": "When nothing remains, everything is equally possible.",
        "card_back_id": "0aeebaf5-8c7d-4636-9e82-8c27447861f7",
        "artist": "Jim Nelson",
        "artist_ids": [
            "aa9f64d1-29e1-4c82-877e-44c18183f40b"
        ],
        "illustration_id": "1465d64c-726b-4c8b-987b-3711e2512092",
        "border_color": "black",
        "frame": "2003",
        "full_art": false,
        "textless": false,
        "booster": true,
        "story_spotlight": false,
        "edhrec_rank": 12164,
        "prices": {
            "usd": "1.72",
            "usd_foil": "9.05",
            "usd_etched": null,
            "eur": "0.45",
            "eur_foil": "7.40",
            "tix": "0.01"
        },
        "related_uris": {
            "gatherer": "https://gatherer.wizards.com/Pages/Card/Details.aspx?multiverseid=88817",
            "tcgplayer_infinite_articles": "https://infinite.tcgplayer.com/search?contentMode=article&game=magic&partner=scryfall&q=One+with+Nothing&utm_campaign=affiliate&utm_medium=api&utm_source=scryfall",
            "tcgplayer_infinite_decks": "https://infinite.tcgplayer.com/search?contentMode=deck&game=magic&partner=scryfall&q=One+with+Nothing&utm_campaign=affiliate&utm_medium=api&utm_source=scryfall",
            "edhrec": "https://edhrec.com/route/?cc=One+with+Nothing",
            "mtgtop8": "https://mtgtop8.com/search?MD_check=1&SB_check=1&cards=One+with+Nothing"
        },
        "purchase_uris": {
            "tcgplayer": "https://shop.tcgplayer.com/product/productsearch?id=12503&utm_campaign=affiliate&utm_medium=api&utm_source=scryfall",
            "cardmarket": "https://www.cardmarket.com/en/Magic/Products/Search?referrer=scryfall&searchString=One+with+Nothing&utm_campaign=card_prices&utm_medium=text&utm_source=scryfall",
            "cardhoarder": "https://www.cardhoarder.com/cards/22224?affiliate_id=scryfall&ref=card-profile&utm_campaign=affiliate&utm_medium=card&utm_source=scryfall"
        }
    });

    const findCardById = () =>
    {
        console.log("DOing this");
        fetch(`https://api.scryfall.com/cards/${urlC}`)
            .then(res => res.json())
            .then(re => setCard(re))
    }

    useEffect(findCardById, []);

    return (
        <>
            <div className="row mt-2">
                <div className="col-7 col-lg-9">

                </div>
                <div className="col-5 col-lg-3">
                    <LoginComponent/>
                </div>
            </div>
            <div className="row mt-2">
                <div className="col-2 m-1">
                    <NavigationSidebar active='search'/>
                </div>
                <div className="col-9"
                     style={{"position": "relative"}}>
                    <CardComponent card={card}/>
                    <br/>
                    <CommentList c={urlC}/>
                </div>
            </div>
        </>
    );
};
export default Details;